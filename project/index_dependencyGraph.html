<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebScraper MVC Architecture</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1200px;
            width: 100%;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        svg {
            width: 100%;
            height: auto;
        }
        .class-box {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .class-box:hover rect {
            fill: #f0f0f0;
            stroke-width: 3;
        }
        .class-box rect {
            transition: all 0.3s ease;
        }
        .dependency-line {
            transition: all 0.3s ease;
        }
        .class-box:hover ~ .dependency-line,
        .dependency-line:hover {
            stroke-width: 3;
            stroke: #ff6b6b;
        }
        text {
            user-select: none;
        }
        .legend {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .legend h3 {
            margin-top: 0;
            color: #333;
        }
        .legend-item {
            margin: 8px 0;
            display: flex;
            align-items: center;
        }
        .legend-arrow {
            width: 40px;
            height: 2px;
            background: #333;
            margin-right: 10px;
            position: relative;
        }
        .legend-arrow::after {
            content: '';
            position: absolute;
            right: -5px;
            top: -3px;
            width: 0;
            height: 0;
            border-left: 8px solid #333;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
        }
        .implements {
            background: #4CAF50;
        }
        .implements::after {
            border-left-color: #4CAF50;
        }
        .uses {
            background: #2196F3;
        }
        .uses::after {
            border-left-color: #2196F3;
        }
        .observes {
            background: #FF9800;
            border: 2px dashed #FF9800;
            background: none;
        }
        .observes::after {
            border-left-color: #FF9800;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>WebScraper MVC Class Dependency Diagram</h1>
        <svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
            <!-- Definitions for arrows -->
            <defs>
                <marker id="arrowhead-uses" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#2196F3" />
                </marker>
                <marker id="arrowhead-implements" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#4CAF50" />
                </marker>
                <marker id="arrowhead-observes" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#FF9800" />
                </marker>
            </defs>

            <!-- Observer Interface (Top Left) -->
            <g class="class-box">
                <rect x="50" y="50" width="180" height="100" fill="#fff9c4" stroke="#333" stroke-width="2" rx="5"/>
                <text x="140" y="75" text-anchor="middle" font-weight="bold" font-size="16">«trait»</text>
                <text x="140" y="95" text-anchor="middle" font-weight="bold" font-size="18">Observer</text>
                <line x1="50" y1="105" x2="230" y2="105" stroke="#333" stroke-width="1"/>
                <text x="140" y="125" text-anchor="middle" font-size="14">+ update(): Unit</text>
            </g>

            <!-- Observable Trait (Top Right) -->
            <g class="class-box">
                <rect x="670" y="50" width="180" height="120" fill="#fff9c4" stroke="#333" stroke-width="2" rx="5"/>
                <text x="760" y="75" text-anchor="middle" font-weight="bold" font-size="16">«trait»</text>
                <text x="760" y="95" text-anchor="middle" font-weight="bold" font-size="18">Observable</text>
                <line x1="670" y1="105" x2="850" y2="105" stroke="#333" stroke-width="1"/>
                <text x="760" y="125" text-anchor="middle" font-size="13">+ add(o: Observer)</text>
                <text x="760" y="145" text-anchor="middle" font-size="13">+ remove(o: Observer)</text>
                <text x="760" y="165" text-anchor="middle" font-size="13">+ notifyObservers()</text>
            </g>

            <!-- Data Case Class (Bottom Right) -->
            <g class="class-box">
                <rect x="670" y="450" width="180" height="100" fill="#e1f5fe" stroke="#333" stroke-width="2" rx="5"/>
                <text x="760" y="475" text-anchor="middle" font-weight="bold" font-size="16">«case class»</text>
                <text x="760" y="495" text-anchor="middle" font-weight="bold" font-size="18">Data</text>
                <line x1="670" y1="505" x2="850" y2="505" stroke="#333" stroke-width="1"/>
                <text x="760" y="525" text-anchor="middle" font-size="14">lines: List[String]</text>
            </g>

            <!-- Controller Class (Middle Right) -->
            <g class="class-box">
                <rect x="620" y="250" width="280" height="140" fill="#c8e6c9" stroke="#333" stroke-width="2" rx="5"/>
                <text x="760" y="275" text-anchor="middle" font-weight="bold" font-size="18">Controller</text>
                <line x1="620" y1="285" x2="900" y2="285" stroke="#333" stroke-width="1"/>
                <text x="760" y="305" text-anchor="middle" font-size="14">- data: Data</text>
                <line x1="620" y1="315" x2="900" y2="315" stroke="#333" stroke-width="1"/>
                <text x="760" y="335" text-anchor="middle" font-size="14">+ processText(text: String)</text>
                <text x="760" y="355" text-anchor="middle" font-size="14">+ processFile(path: String)</text>
                <text x="760" y="375" text-anchor="middle" font-size="14">+ notifyObservers()</text>
            </g>

            <!-- Tui Class (Bottom Left) -->
            <g class="class-box">
                <rect x="20" y="400" width="280" height="160" fill="#ffccbc" stroke="#333" stroke-width="2" rx="5"/>
                <text x="160" y="425" text-anchor="middle" font-weight="bold" font-size="18">Tui</text>
                <line x1="20" y1="435" x2="300" y2="435" stroke="#333" stroke-width="1"/>
                <text x="160" y="455" text-anchor="middle" font-size="14">- controller: Controller</text>
                <text x="160" y="475" text-anchor="middle" font-size="14">- width: Int, height: Int</text>
                <line x1="20" y1="485" x2="300" y2="485" stroke="#333" stroke-width="1"/>
                <text x="160" y="505" text-anchor="middle" font-size="14">+ run(): Unit</text>
                <text x="160" y="525" text-anchor="middle" font-size="14">+ update(): Unit</text>
                <text x="160" y="545" text-anchor="middle" font-size="14">+ buildTuiString(): String</text>
            </g>

            <!-- Dependencies -->
            
            <!-- Tui implements Observer -->
            <line class="dependency-line" x1="140" y1="150" x2="140" y2="400" 
                  stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead-implements)" stroke-dasharray="5,5"/>
            
            <!-- Tui uses Controller -->
            <line class="dependency-line" x1="300" y1="480" x2="620" y2="320" 
                  stroke="#2196F3" stroke-width="2" marker-end="url(#arrowhead-uses)"/>
            
            <!-- Controller extends Observable -->
            <line class="dependency-line" x1="760" y1="170" x2="760" y2="250" 
                  stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead-implements)" stroke-dasharray="5,5"/>
            
            <!-- Controller uses Data -->
            <line class="dependency-line" x1="760" y1="390" x2="760" y2="450" 
                  stroke="#2196F3" stroke-width="2" marker-end="url(#arrowhead-uses)"/>
            
            <!-- Controller notifies Tui (Observer pattern) -->
            <path class="dependency-line" d="M 620 320 Q 400 350 300 480" 
                  stroke="#FF9800" stroke-width="2" fill="none" 
                  marker-end="url(#arrowhead-observes)" stroke-dasharray="8,4"/>

            <!-- Labels on arrows -->
            <text x="150" y="270" font-size="12" fill="#4CAF50">«implements»</text>
            <text x="460" y="380" font-size="12" fill="#2196F3">uses</text>
            <text x="770" y="210" font-size="12" fill="#4CAF50">«extends»</text>
            <text x="770" y="420" font-size="12" fill="#2196F3">has</text>
            <text x="420" y="340" font-size="12" fill="#FF9800">notifies</text>
        </svg>

        <div class="legend">
            <h3>Legend</h3>
            <div class="legend-item">
                <div class="legend-arrow implements"></div>
                <span><strong>Implements/Extends:</strong> Inheritance or trait implementation</span>
            </div>
            <div class="legend-item">
                <div class="legend-arrow uses"></div>
                <span><strong>Uses/Has:</strong> Dependency or composition relationship</span>
            </div>
            <div class="legend-item">
                <div class="legend-arrow observes"></div>
                <span><strong>Notifies:</strong> Observer pattern notification</span>
            </div>
        </div>

        <div class="legend" style="margin-top: 15px;">
            <h3>Architecture Summary</h3>
            <p><strong>Model:</strong> Data (immutable case class holding application state)</p>
            <p><strong>View:</strong> Tui (Text User Interface, observes controller changes)</p>
            <p><strong>Controller:</strong> Controller (manages Data, notifies observers via Observable trait)</p>
            <p><strong>Pattern:</strong> Observer Pattern - Controller notifies Tui when Data changes</p>
        </div>
    </div>
</body>
</html>